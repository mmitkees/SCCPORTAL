<?xml version="1.0" encoding="US-ASCII" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated Sep 29, 2009 11:47:41 PM-->
<project name="WebCenterSpacesSharedLibExtension" default="all" basedir="." 
         xmlns:wls="oracle.webcenter.tools.wls">

  <property file="../config.properties"/>
  <property file="build.properties"/>
  <import file="internal-targets.xml"/>

<taskdef resource="net/sf/antcontrib/antcontrib.properties">
  <classpath>
    <pathelement location="${jdeveloper.install.home.directory}/modules/net.sf.antcontrib_1.0.0.0_1-0b2/lib/ant-contrib.jar"/>
  </classpath>
</taskdef>
 
 <target name="clean-stage" 
        description="Cleans the output directory and generates the war"
        depends="clean, stage"/>
       
    <target name="deploy-shared-lib" 
             depends="init-wls" 
             description="Deploy the extending WebCenter shared library">
      <echo> ---------------------------- </echo>
      <echo> ${wls.userconfig} ${wls.userkey} ${wls.host}:${wls.port} ${oracle.jdeveloper.deploy.dir}/exploded ${wls.webcenter.app.target} ${customer.library.name}</echo>
      <exec logerror="true" 
            executable="${jdeveloper.install.home.directory}/oracle_common/common/bin/${wlst.executable}" 
            dir="${jdeveloper.install.home.directory}/oracle_common/common/bin">

        <!--TODO:ExpDeploy Uncomment line after this and comment the one after that to deploy exploded. --> 
        <arg line="${extending.spaces.home.dir}/WebCenterSpacesSharedLibExtension/extspaces.py ${wls.userconfig} ${wls.userkey} ${wls.host}:${wls.port} ${oracle.jdeveloper.deploy.dir}/exploded/${customer.library.name}.war ${wls.webcenter.app.target} ${customer.library.name}"/>
        <!--TODO:ExpDeploy Uncomment  line below and comment line above to have non-exploded deploy -->
        <!--arg line="${extending.spaces.home.dir}/WebCenterSpacesSharedLibExtension/extspaces.py ${wls.userconfig} ${wls.userkey} ${wls.host}:${wls.port} ${oracle.jdeveloper.deploy.dir}/${shared.library.name} ${wls.webcenter.app.target} ${customer.library.name}"/-->
      </exec>

      <echo> ---------------------------- </echo>
      <echo> Restarting the app           </echo>
      <echo> ---------------------------- </echo>
      <exec logerror="true" 
            executable="${jdeveloper.install.home.directory}/oracle_common/common/bin/${wlst.executable}" 
            dir="${jdeveloper.install.home.directory}/oracle_common/common/bin">
        <arg line="${extending.spaces.home.dir}/WebCenterSpacesSharedLibExtension/redepwc.py ${wls.userconfig} ${wls.userkey} ${wls.host}:${wls.port} "/>
      </exec>
    </target>



</project>
          
